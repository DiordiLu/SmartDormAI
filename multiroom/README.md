# 🏠 多房间语音系统模块（multiroom）

## 模块简介
本模块用于支持多个麦克风输入设备和多个扬声器输出设备的协调工作，使语音助手能在整个宿舍空间中被唤醒、回应并发声，实现多区域覆盖和局部智能响应。

---

## 核心功能
- 同时监听多个麦克风
- 自动识别哪个房间有指令（基于音量/方向）
- 对应房间扬声器播报回应
- 多房间之间消息同步与冲突管理
- 与 listener 和 speaker 模块联动
- 可远程关闭/启用某个房间的监听（隐私模式）

---

## 使用场景
- 卧室内说“贾维斯”，仅卧室麦克风触发监听
- 厨房说“帮我打开灯”，厨房灯开启，厨房音响播报
- 游戏时屏蔽主机麦克风，仅使用窗边监听器

---

## 推荐架构设计
```python
# 启动所有监听器和扬声器
from multiroom import RoomManager

rm = RoomManager()
rm.start_all()

# 动态关闭/打开某个房间
rm.disable_room("bedroom")
rm.enable_room("kitchen")
```

---

## 技术建议
- 监听：使用 `sounddevice`, `pyaudio` 区分设备 ID
- 播放：使用 `pyaudio` 选择扬声器输出设备
- 房间配置：`multiroom_config.json` 维护设备 → 房间映射
- 多线程/进程处理音频流（防堵塞）

---

## 文件结构建议
- `rooms/` 子文件夹：每个房间对应监听和播报器
- `multiroom_config.json`：配置房间和设备 ID 映射

---

## 开发计划
- [x] 同时监听多个输入设备
- [x] 控制指定输出设备发声
- [ ] 房间与设备动态绑定配置
- [ ] 语音同步路由
- [ ] 隐私开关机制
