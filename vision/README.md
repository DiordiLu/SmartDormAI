# 🎥 摄像头与门禁识别模块（vision）

## 模块简介
本模块用于监控宿舍门禁状态，结合摄像头自动录像与人脸识别技术，实现门控安全记录、身份筛查与智能触发操作（如自动开灯、记录非本人进出等）。

---

## 核心功能
- 门开启时立即录像，并同步启动开灯板机
- 支持录像保留延迟（如关门后延迟30秒）
- 拍摄照片或视频后进行人脸识别
- 可自动删除本人照片，只保留陌生人
- 仅在电脑开机时进行识别操作（省资源）

---

## 工作流程
1. 门磁或信号检测门被打开
2. 触发：
   - 开启摄像头录像
   - 启动物理板机打开灯光（提升图像清晰度）
3. 若电脑开机，进行人脸识别
   - 属于本人则自动删除
   - 陌生人照片/视频保留，并写入警告日志
4. 关门后延迟30秒停止录像

---

## 推荐依赖
- `opencv-python`（摄像头控制）
- `face_recognition`（基于 dlib 的高效人脸识别）
- `datetime`, `os`, `shutil`（文件管理）

---

## 使用方法
```python
from vision import handle_door_event
handle_door_event("door_open")
```

---

## 文件结构建议
- `photos/` 保存快照图像
- `videos/` 保存录像片段
- `faces/` 存放你的个人人脸模板图像
- `logs/` 记录异常行为或陌生人识别结果

---

## 开发计划
- [x] 摄像头启动与录制
- [x] 识别人脸、删除本人照片
- [x] 延迟录像终止
- [ ] 引入动态行为分析（进门/出门）
- [ ] 实时发出通知
- [ ] 隐私加密处理
